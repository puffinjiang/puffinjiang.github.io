<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Signing Commits Of Git On Windows | Puffin Jiang&#39;s Blog</title>
<meta name="keywords" content="Signing Git Commits, Windows">
<meta name="description" content="在 Windows 上使用 GPG 对 Git 提交进行签名">
<meta name="author" content="
作者：Puffin Jiang">
<link rel="canonical" href="https://puffinjiang.github.io/posts/solution/signingcommitsofgitonwindows/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.34bf4cb683cae568b9d188811604e39e36b24e661d45a315724d1459ee1160b4.css" integrity="sha256-NL9MtoPK5Wi50YiBFgTjnjayTmYdRaMVck0UWe4RYLQ=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://cdn.jsdelivr.net/gh/puffinjiang/oss@main/uPic/1661409751396.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://cdn.jsdelivr.net/gh/puffinjiang/oss@main/uPic/1661409677120.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://cdn.jsdelivr.net/gh/puffinjiang/oss@main/uPic/1661409656713.png">
<link rel="apple-touch-icon" href="https://cdn.jsdelivr.net/gh/puffinjiang/oss@main/uPic/1661409703162.png">
<link rel="mask-icon" href="https://cdn.jsdelivr.net/gh/puffinjiang/oss@main/uPic/1661412250612.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Signing Commits Of Git On Windows" />
<meta property="og:description" content="在 Windows 上使用 GPG 对 Git 提交进行签名" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://puffinjiang.github.io/posts/solution/signingcommitsofgitonwindows/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-28T20:02:50+08:00" />
<meta property="article:modified_time" content="2023-07-28T20:02:50+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Signing Commits Of Git On Windows"/>
<meta name="twitter:description" content="在 Windows 上使用 GPG 对 Git 提交进行签名"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "📚文章",
      "item": "https://puffinjiang.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "🛠️解决方案",
      "item": "https://puffinjiang.github.io/posts/solution/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "Signing Commits Of Git On Windows",
      "item": "https://puffinjiang.github.io/posts/solution/signingcommitsofgitonwindows/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Signing Commits Of Git On Windows",
  "name": "Signing Commits Of Git On Windows",
  "description": "在 Windows 上使用 GPG 对 Git 提交进行签名",
  "keywords": [
    "Signing Git Commits", "Windows"
  ],
  "articleBody": "配置 GPG 安装 我这里使用 scoop 来管理常用的软件。\n1 scoop install gpg 查看安装的版本\n1 gpg --version 结果如下：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 gpg (GnuPG) 2.4.3 libgcrypt 1.10.2 Copyright (C) 2023 g10 Code GmbH License GNU GPL-3.0-or-later This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law. Home: D:\\Development\\Scoop\\apps\\gpg\\current\\home Supported algorithms: Pubkey: RSA, ELG, DSA, ECDH, ECDSA, EDDSA Cipher: IDEA, 3DES, CAST5, BLOWFISH, AES, AES192, AES256, TWOFISH, CAMELLIA128, CAMELLIA192, CAMELLIA256 Hash: SHA1, RIPEMD160, SHA256, SHA384, SHA512, SHA224 Compression: Uncompressed, ZIP, ZLIB, BZIP2 生成新的 GPG 密钥 输入如下命令：\n1 gpg --full-generate-key 上面的命令执行之后，会要求选用对应的加密算法。我们在这里直接回车选择默认的 9 使用 ECC 椭圆曲线加密算法用于加密和解密。提示内容如下:\n1 2 3 4 5 6 7 8 9 10 11 12 13 gpg (GnuPG) 2.4.3; Copyright (C) 2023 g10 Code GmbH This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law. Please select what kind of key you want: (1) RSA and RSA (2) DSA and Elgamal (3) DSA (sign only) (4) RSA (sign only) (9) ECC (sign and encrypt) *default* (10) ECC (sign only) (14) Existing key from card Your selection? 选择完成之后，会提示选用对应的椭圆曲线。我们选择默认的 Curve 25519 椭圆曲线。提示内容如下：\n1 2 3 4 Please select which elliptic curve you want: (1) Curve 25519 *default* (4) NIST P-384 (6) Brainpool P-256 设置过期时间，根据需要设置，我这里选的是 0，设置不过期。\n1 2 3 4 5 6 7 Please specify how long the key should be valid. 0 = key does not expire = key expires in n days w = key expires in n weeks m = key expires in n months y = key expires in n years Key is valid for? (0) 过期时间选择之后，会提示确认上述的操作，直接输入 y 确认。\n设置相关的用户标识。上一步确认之后，会提示输入用户名，邮箱和注释这三个内容，按自己的情况输入即可。输入并确认后 GPG 密钥则生成。\n1 2 3 4 5 6 7 GnuPG needs to construct a user ID to identify your key. Real name: name Email address: name@example.com Comment: You selected this USER-ID: \"name \" 查看已经生成的密钥 1 gpg --list-secret-keys --keyid-format=long 显示如下(相关内容已经过处理)：\n1 2 3 4 sec ed25519/5D4C3FXXXXXX2034EF xxxx-xx-xx [SC] D27B94066FFDEDXXXXXXXD4885D4C3F97ASD034EF uid [ultimate] name ssb cv25519/901FXXXAXX204X8C xxxx-xx-xx [E] 导出公钥 这里公钥的导出以上面的 5D4C3FXXXXXX2034EF 为例，命令如下：\n1 gpg --armor --export 5D4C3FXXXXXX2034EF 显示的公钥格式如下（中间的具体内容以 ··· 代替）：\n1 2 3 4 -----BEGIN PGP PUBLIC KEY BLOCK----- ... -----END PGP PUBLIC KEY BLOCK----- 配置 Git 提交时签名 Github 配置密钥 我们先导出当前要使用的公钥\n点击 Github 右上角的头像，点击 Settings 选项。\n在左侧的页面单击 SSH and GPG keys 选项。\n在 GPG keys 旁边，点击 New GPG key 按钮。\n在新页中的 Title 输入自己的备注信息，在 Key 中填入第一步中导出的公钥。\n点击 Add key 按钮，公钥添加成功。\n本地配置 配置本地 Git 签名使用的密钥 ID，我们这里使用的密钥 ID 为：5D4C3FXXXXXX2034EF (与配置在 Github 里面的保持一致)。\n1 2 # 这里添加 --global 表示设置为全局 git config --global user.signingkey 5D4C3FXXXXXX2034EF 配置默认对所有提交进行签名，命令如下：\n1 git config --global commit.gpgsign true 可以使用 --unset 取消指定的签名 ID。如下：\n1 git config --global --unset user.signingkey ",
  "wordCount" : "921",
  "inLanguage": "en",
  "datePublished": "2023-07-28T20:02:50+08:00",
  "dateModified": "2023-07-28T20:02:50+08:00",
  "author":[{
    "@type": "Person",
    "name": "Puffin Jiang"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://puffinjiang.github.io/posts/solution/signingcommitsofgitonwindows/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Puffin Jiang's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://cdn.jsdelivr.net/gh/puffinjiang/oss@main/uPic/1661409751396.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://puffinjiang.github.io" accesskey="h" title="Puffin Jiang&#39;s Blog (Alt + H)">
                <img src="https://cdn.jsdelivr.net/gh/puffinjiang/oss@main/uPic/1661396192756.jpeg" alt="" aria-label="logo"
                    height="35">Puffin Jiang&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://puffinjiang.github.io/search" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
            <li>
                <a href="https://puffinjiang.github.io/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="https://puffinjiang.github.io/posts" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://puffinjiang.github.io/archives" title="⏱归档">
                    <span>⏱归档</span>
                </a>
            </li>
            <li>
                <a href="https://puffinjiang.github.io/tags" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://puffinjiang.github.io/about" title="🙋🏻‍♂️关于">
                    <span>🙋🏻‍♂️关于</span>
                </a>
            </li>
            <li>
                <a href="https://puffinjiang.github.io/links" title="🤝友链">
                    <span>🤝友链</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://puffinjiang.github.io">Home</a>&nbsp;»&nbsp;<a href="https://puffinjiang.github.io/posts/">📚文章</a>&nbsp;»&nbsp;<a href="https://puffinjiang.github.io/posts/solution/">🛠️解决方案</a></div>
    <h1 class="post-title">
      Signing Commits Of Git On Windows
    </h1>
    <div class="post-description">
      在 Windows 上使用 GPG 对 Git 提交进行签名
    </div>
    <div class="post-meta">










创建:&nbsp;<span title='2023-07-28 20:02:50 +0800 +0800'>2023-07-28</span>&nbsp;|&nbsp;更新:&nbsp;2023-07-28&nbsp;|&nbsp;字数:&nbsp;921字&nbsp;|&nbsp;时长: 2分钟&nbsp;|&nbsp;
作者：Puffin Jiang

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">Table of Contents</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#%e9%85%8d%e7%bd%ae-gpg" aria-label="配置 GPG">配置 GPG</a><ul>
                            
                    <li>
                        <a href="#%e5%ae%89%e8%a3%85" aria-label="安装">安装</a></li>
                    <li>
                        <a href="#%e7%94%9f%e6%88%90%e6%96%b0%e7%9a%84-gpg-%e5%af%86%e9%92%a5" aria-label="生成新的 GPG 密钥">生成新的 GPG 密钥</a></li>
                    <li>
                        <a href="#%e6%9f%a5%e7%9c%8b%e5%b7%b2%e7%bb%8f%e7%94%9f%e6%88%90%e7%9a%84%e5%af%86%e9%92%a5" aria-label="查看已经生成的密钥">查看已经生成的密钥</a></li>
                    <li>
                        <a href="#%e5%af%bc%e5%87%ba%e5%85%ac%e9%92%a5" aria-label="导出公钥">导出公钥</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e9%85%8d%e7%bd%ae-git-%e6%8f%90%e4%ba%a4%e6%97%b6%e7%ad%be%e5%90%8d" aria-label="配置 Git 提交时签名">配置 Git 提交时签名</a><ul>
                            
                    <li>
                        <a href="#github-%e9%85%8d%e7%bd%ae%e5%af%86%e9%92%a5" aria-label="Github 配置密钥">Github 配置密钥</a></li>
                    <li>
                        <a href="#%e6%9c%ac%e5%9c%b0%e9%85%8d%e7%bd%ae" aria-label="本地配置">本地配置</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>
  <div class="post-content"><h2 id="配置-gpg">配置 GPG<a hidden class="anchor" aria-hidden="true" href="#配置-gpg">#</a></h2>
<h3 id="安装">安装<a hidden class="anchor" aria-hidden="true" href="#安装">#</a></h3>
<p>我这里使用 scoop 来管理常用的软件。</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>scoop install gpg
</span></span></code></pre></td></tr></table>
</div>
</div><p>查看安装的版本</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>gpg --version
</span></span></code></pre></td></tr></table>
</div>
</div><p>结果如下：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>gpg (GnuPG) 2.4.3
</span></span><span style="display:flex;"><span>libgcrypt 1.10.2
</span></span><span style="display:flex;"><span>Copyright (C) 2023 g10 Code GmbH
</span></span><span style="display:flex;"><span>License GNU GPL-3.0-or-later &lt;https://gnu.org/licenses/gpl.html&gt;
</span></span><span style="display:flex;"><span>This is free software: you are free to change and redistribute it.
</span></span><span style="display:flex;"><span>There is NO WARRANTY, to the extent permitted by law.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Home: D:\Development\Scoop\apps\gpg\current\home
</span></span><span style="display:flex;"><span>Supported algorithms:
</span></span><span style="display:flex;"><span>Pubkey: RSA, ELG, DSA, ECDH, ECDSA, EDDSA
</span></span><span style="display:flex;"><span>Cipher: IDEA, 3DES, CAST5, BLOWFISH, AES, AES192, AES256, TWOFISH,
</span></span><span style="display:flex;"><span>        CAMELLIA128, CAMELLIA192, CAMELLIA256
</span></span><span style="display:flex;"><span>Hash: SHA1, RIPEMD160, SHA256, SHA384, SHA512, SHA224
</span></span><span style="display:flex;"><span>Compression: Uncompressed, ZIP, ZLIB, BZIP2
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="生成新的-gpg-密钥">生成新的 GPG 密钥<a hidden class="anchor" aria-hidden="true" href="#生成新的-gpg-密钥">#</a></h3>
<ol>
<li>
<p>输入如下命令：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>gpg --full-generate-key
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>上面的命令执行之后，会要求选用对应的加密算法。我们在这里直接回车选择默认的 9 使用 <a href="https://zh.wikipedia.org/wiki/%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E5%AF%86%E7%A0%81%E5%AD%A6">ECC 椭圆曲线加密算法</a>用于加密和解密。提示内容如下:</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>gpg (GnuPG) 2.4.3; Copyright (C) 2023 g10 Code GmbH
</span></span><span style="display:flex;"><span>This is free software: you are free to change and redistribute it.
</span></span><span style="display:flex;"><span>There is NO WARRANTY, to the extent permitted by law.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Please select what kind of key you want:
</span></span><span style="display:flex;"><span>   (1) RSA and RSA
</span></span><span style="display:flex;"><span>   (2) DSA and Elgamal
</span></span><span style="display:flex;"><span>   (3) DSA (sign only)
</span></span><span style="display:flex;"><span>   (4) RSA (sign only)
</span></span><span style="display:flex;"><span>   (9) ECC (sign and encrypt) *default*
</span></span><span style="display:flex;"><span>  (10) ECC (sign only)
</span></span><span style="display:flex;"><span>  (14) Existing key from card
</span></span><span style="display:flex;"><span>Your selection?
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>选择完成之后，会提示选用对应的<strong>椭圆曲线</strong>。我们选择默认的 <code>Curve 25519</code> 椭圆曲线。提示内容如下：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Please select which elliptic curve you want:
</span></span><span style="display:flex;"><span>(1) Curve 25519 *default*
</span></span><span style="display:flex;"><span>(4) NIST P-384
</span></span><span style="display:flex;"><span>(6) Brainpool P-256
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>设置过期时间，根据需要设置，我这里选的是 0，设置不过期。</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Please specify how long the key should be valid.
</span></span><span style="display:flex;"><span>      0 = key does not expire
</span></span><span style="display:flex;"><span>   &lt;n&gt;  = key expires in n days
</span></span><span style="display:flex;"><span>   &lt;n&gt;w = key expires in n weeks
</span></span><span style="display:flex;"><span>   &lt;n&gt;m = key expires in n months
</span></span><span style="display:flex;"><span>   &lt;n&gt;y = key expires in n years
</span></span><span style="display:flex;"><span>Key is valid for? (0) 
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>过期时间选择之后，会提示确认上述的操作，直接输入 <code>y</code> 确认。</p>
</li>
<li>
<p>设置相关的用户标识。上一步确认之后，会提示输入用户名，邮箱和注释这三个内容，按自己的情况输入即可。输入并确认后 GPG 密钥则生成。</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>GnuPG needs to construct a user ID to identify your key.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Real name: name
</span></span><span style="display:flex;"><span>Email address: name@example.com
</span></span><span style="display:flex;"><span>Comment:
</span></span><span style="display:flex;"><span>You selected this USER-ID:
</span></span><span style="display:flex;"><span>    &#34;name &lt;name@example.com&gt;&#34;
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="查看已经生成的密钥">查看已经生成的密钥<a hidden class="anchor" aria-hidden="true" href="#查看已经生成的密钥">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>gpg --list-secret-keys --keyid-format=long
</span></span></code></pre></td></tr></table>
</div>
</div><p>显示如下(相关内容已经过处理)：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>sec   ed25519/5D4C3FXXXXXX2034EF xxxx-xx-xx [SC]
</span></span><span style="display:flex;"><span>      D27B94066FFDEDXXXXXXXD4885D4C3F97ASD034EF
</span></span><span style="display:flex;"><span>uid                 [ultimate] name &lt;name@example.com&gt;
</span></span><span style="display:flex;"><span>ssb   cv25519/901FXXXAXX204X8C xxxx-xx-xx [E]
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="导出公钥">导出公钥<a hidden class="anchor" aria-hidden="true" href="#导出公钥">#</a></h3>
<p>这里公钥的导出以上面的 <code>5D4C3FXXXXXX2034EF</code> 为例，命令如下：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>gpg --armor --export 5D4C3FXXXXXX2034EF
</span></span></code></pre></td></tr></table>
</div>
</div><p>显示的公钥格式如下（中间的具体内容以 <code>···</code> 代替）：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>-----BEGIN PGP PUBLIC KEY BLOCK-----
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>-----END PGP PUBLIC KEY BLOCK-----
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="配置-git-提交时签名">配置 Git 提交时签名<a hidden class="anchor" aria-hidden="true" href="#配置-git-提交时签名">#</a></h2>
<h3 id="github-配置密钥">Github 配置密钥<a hidden class="anchor" aria-hidden="true" href="#github-配置密钥">#</a></h3>
<ol>
<li>
<p>我们先<a href="#%E6%9F%A5%E7%9C%8B%E5%B7%B2%E7%BB%8F%E7%94%9F%E6%88%90%E7%9A%84%E5%AF%86%E9%92%A5">导出当前要使用的公钥</a></p>
</li>
<li>
<p>点击 Github 右上角的头像，点击 <code>Settings</code> 选项。</p>
</li>
<li>
<p>在左侧的页面单击 <code>SSH and GPG keys</code> 选项。</p>
</li>
<li>
<p>在 <code>GPG keys</code> 旁边，点击 <code>New GPG key</code> 按钮。</p>
</li>
<li>
<p>在新页中的 <code>Title</code> 输入自己的备注信息，在 <code>Key</code> 中填入第一步中导出的公钥。</p>
</li>
<li>
<p>点击 <code>Add key</code> 按钮，公钥添加成功。</p>
</li>
</ol>
<h3 id="本地配置">本地配置<a hidden class="anchor" aria-hidden="true" href="#本地配置">#</a></h3>
<ol>
<li>
<p>配置本地 Git 签名使用的密钥 ID，我们这里使用的密钥 ID 为：<code>5D4C3FXXXXXX2034EF</code> (与配置在 Github 里面的保持一致)。</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#007f7f"># 这里添加 --global 表示设置为全局</span>
</span></span><span style="display:flex;"><span>git config --global user.signingkey 5D4C3FXXXXXX2034EF
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>配置默认对所有提交进行签名，命令如下：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git config --global commit.gpgsign <span style="color:#fff;font-weight:bold">true</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>可以使用 <code>--unset</code> 取消指定的签名 ID。如下：</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>git config --global --unset user.signingkey
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://puffinjiang.github.io/tags/signing-git-commits/">Signing Git Commits</a></li>
      <li><a href="https://puffinjiang.github.io/tags/windows/">Windows</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://puffinjiang.github.io/posts/solution/dataduplicationinmysqlusingorderbyandlimitpagination/">
    <span class="title">« Prev</span>
    <br>
    <span>Data Duplication In Mysql Using Order By And Limit Pagination</span>
  </a>
  <a class="next" href="https://puffinjiang.github.io/posts/solution/mongodbreplicasetservicesdeployment/">
    <span class="title">Next »</span>
    <br>
    <span>MongoDB4.4 副本集服务部署</span>
  </a>
</nav>

  </footer><script src="https://utteranc.es/client.js"
    repo="puffinjiang/blog-comment"
    issue-term="pathname"
    label="Comment"
    theme="github-light"
    crossorigin="anonymous"
    async>
</script>
</article>
    </main>
    
<footer class="footer">
    <span>Puffin Jiang</span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
