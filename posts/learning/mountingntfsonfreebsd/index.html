<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Mounting NTFS On FreeBSD | Puffin Jiang&#39;s Blog</title>
<meta name="keywords" content="NTFS, FreeBSD">
<meta name="description" content="Backing up data on my windows system disk to freebsd">
<meta name="author" content="
作者：Puffin Jiang">
<link rel="canonical" href="https://puffinjiang.github.io/posts/learning/mountingntfsonfreebsd/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.34bf4cb683cae568b9d188811604e39e36b24e661d45a315724d1459ee1160b4.css" integrity="sha256-NL9MtoPK5Wi50YiBFgTjnjayTmYdRaMVck0UWe4RYLQ=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://cdn.jsdelivr.net/gh/puffinjiang/oss@main/uPic/1661409751396.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://cdn.jsdelivr.net/gh/puffinjiang/oss@main/uPic/1661409677120.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://cdn.jsdelivr.net/gh/puffinjiang/oss@main/uPic/1661409656713.png">
<link rel="apple-touch-icon" href="https://cdn.jsdelivr.net/gh/puffinjiang/oss@main/uPic/1661409703162.png">
<link rel="mask-icon" href="https://cdn.jsdelivr.net/gh/puffinjiang/oss@main/uPic/1661412250612.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Mounting NTFS On FreeBSD" />
<meta property="og:description" content="Backing up data on my windows system disk to freebsd" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://puffinjiang.github.io/posts/learning/mountingntfsonfreebsd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-03-07T23:37:04+08:00" />
<meta property="article:modified_time" content="2024-03-07T23:37:04+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Mounting NTFS On FreeBSD"/>
<meta name="twitter:description" content="Backing up data on my windows system disk to freebsd"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "📚文章",
      "item": "https://puffinjiang.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "📕学习笔记",
      "item": "https://puffinjiang.github.io/posts/learning/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "Mounting NTFS On FreeBSD",
      "item": "https://puffinjiang.github.io/posts/learning/mountingntfsonfreebsd/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Mounting NTFS On FreeBSD",
  "name": "Mounting NTFS On FreeBSD",
  "description": "Backing up data on my windows system disk to freebsd",
  "keywords": [
    "NTFS", "FreeBSD"
  ],
  "articleBody": "Background I have a windows system hard disk and want to backup its old data to my freebsd service\nInstallation Load fusefs kernel module Load the module\n1 kldload fusefs Setup to load the module at startup\n1 sysrc kld_list+=fusefs Install the NTFS file system 1 pkg install fusefs-ntfs Mount the NTFS disk Get the device info Use dmesg\n1 dmesg | tail Get the device info\n1 2 3 4 5 6 7 8 9 10 umass0 on uhub0 umass0: on usbus0 umass0: SCSI over Bulk-Only; quirks = 0x0100 umass0:4:0: Attached to scbus4 da0 at umass-sim0 bus 0 scbus4 target 0 lun 0 da0: Fixed Direct Access SPC-4 SCSI device da0: Serial Number 0000000247EA da0: 40.000MB/s transfers da0: 953869MB (1953525168 512 byte sectors) da0: quirks=0x2 Use camcontrol devlist\n1 camcontrol devlist The device info\n1 2 3 4 5 at scbus0 target 0 lun 0 (cd0,pass0) at scbus1 target 0 lun 0 (pass1,ada0) at scbus2 target 0 lun 0 (pass2,ada1) at scbus3 target 0 lun 0 (pass3,ses0) at scbus4 target 0 lun 0 (da0,pass4) As we can see, the device is da0\nShow the part of the disk 1 gpart show da0 We can see the device has 6 partitions.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 =\u003e 34 1953525101 da0 GPT (932G) 34 2014 - free - (1.0M) 2048 1083392 1 ms-recovery (529M) 1085440 204800 2 efi (100M) 1290240 32768 3 ms-reserved (16M) 1323008 207159698 4 ms-basic-data (99G) 208482706 1646 - free - (823K) 208484352 1230848 5 ms-recovery (601M) 209715200 2048 - free - (1.0M) 209717248 1334204416 6 ms-basic-data (636G) 1543921664 409603471 - free - (195G) Mount the part Mount the partition 4 /dev/da0p4 to /mnt/ntfs/part4 1 ntfs-3g /dev/da0p4 /mnt/ntfs/part4 Mount the partition 6 /dev/da0p6 to /mnt/ntfs/part6 1 ntfs-3g /dev/da0p6 /mnt/ntfs/part6 Troubleshooting Metadata kept in Windows cache 1 2 3 4 5 6 Windows is hibernated, refused to mount. The disk contains an unclean file system (0, 0). Metadata kept in Windows cache, refused to mount. Falling back to read-only mount because the NTFS partition is in an unsafe state. Please resume and shutdown Windows fully (no hibernation or fast restarting.) Use ntfsfix to fix the part\n1 ntfsfix /dev/da0 ",
  "wordCount" : "406",
  "inLanguage": "en",
  "datePublished": "2024-03-07T23:37:04+08:00",
  "dateModified": "2024-03-07T23:37:04+08:00",
  "author":[{
    "@type": "Person",
    "name": "Puffin Jiang"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://puffinjiang.github.io/posts/learning/mountingntfsonfreebsd/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Puffin Jiang's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://cdn.jsdelivr.net/gh/puffinjiang/oss@main/uPic/1661409751396.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://puffinjiang.github.io" accesskey="h" title="Puffin Jiang&#39;s Blog (Alt + H)">
                <img src="https://cdn.jsdelivr.net/gh/puffinjiang/oss@main/uPic/1661396192756.jpeg" alt="" aria-label="logo"
                    height="35">Puffin Jiang&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://puffinjiang.github.io/search" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
            <li>
                <a href="https://puffinjiang.github.io/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="https://puffinjiang.github.io/posts" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://puffinjiang.github.io/archives" title="⏱归档">
                    <span>⏱归档</span>
                </a>
            </li>
            <li>
                <a href="https://puffinjiang.github.io/tags" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://puffinjiang.github.io/about" title="🙋🏻‍♂️关于">
                    <span>🙋🏻‍♂️关于</span>
                </a>
            </li>
            <li>
                <a href="https://puffinjiang.github.io/links" title="🤝友链">
                    <span>🤝友链</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://puffinjiang.github.io">Home</a>&nbsp;»&nbsp;<a href="https://puffinjiang.github.io/posts/">📚文章</a>&nbsp;»&nbsp;<a href="https://puffinjiang.github.io/posts/learning/">📕学习笔记</a></div>
    <h1 class="post-title">
      Mounting NTFS On FreeBSD
    </h1>
    <div class="post-description">
      Backing up data on my windows system disk to freebsd
    </div>
    <div class="post-meta">










创建:&nbsp;<span title='2024-03-07 23:37:04 +0800 +0800'>2024-03-07</span>&nbsp;|&nbsp;更新:&nbsp;2024-03-07&nbsp;|&nbsp;字数:&nbsp;406字&nbsp;|&nbsp;时长: 1分钟&nbsp;|&nbsp;
作者：Puffin Jiang

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">Table of Contents</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#background" aria-label="Background">Background</a></li>
                    <li>
                        <a href="#installation" aria-label="Installation">Installation</a><ul>
                            
                    <li>
                        <a href="#load-fusefs-kernel-module" aria-label="Load fusefs kernel module">Load fusefs kernel module</a></li>
                    <li>
                        <a href="#install--the-ntfs-file-system" aria-label="Install  the NTFS file system">Install  the NTFS file system</a></li></ul>
                    </li>
                    <li>
                        <a href="#mount-the-ntfs-disk" aria-label="Mount the NTFS disk">Mount the NTFS disk</a><ul>
                            
                    <li>
                        <a href="#get-the-device-info" aria-label="Get the device info">Get the device info</a></li>
                    <li>
                        <a href="#show-the-part-of-the-disk" aria-label="Show the part of the disk">Show the part of the disk</a></li>
                    <li>
                        <a href="#mount-the-part" aria-label="Mount the part">Mount the part</a></li></ul>
                    </li>
                    <li>
                        <a href="#troubleshooting" aria-label="Troubleshooting">Troubleshooting</a><ul>
                            
                    <li>
                        <a href="#metadata-kept-in-windows-cache" aria-label="Metadata kept in Windows cache">Metadata kept in Windows cache</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>
  <div class="post-content"><h2 id="background">Background<a hidden class="anchor" aria-hidden="true" href="#background">#</a></h2>
<p>I have a windows system hard disk and want to backup its old data to my freebsd service</p>
<h2 id="installation">Installation<a hidden class="anchor" aria-hidden="true" href="#installation">#</a></h2>
<h3 id="load-fusefs-kernel-module">Load fusefs kernel module<a hidden class="anchor" aria-hidden="true" href="#load-fusefs-kernel-module">#</a></h3>
<ol>
<li>
<p>Load the module</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>kldload fusefs
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Setup to load the module at startup</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>sysrc kld_list+=fusefs
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="install--the-ntfs-file-system">Install  the NTFS file system<a hidden class="anchor" aria-hidden="true" href="#install--the-ntfs-file-system">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>pkg install fusefs-ntfs
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="mount-the-ntfs-disk">Mount the NTFS disk<a hidden class="anchor" aria-hidden="true" href="#mount-the-ntfs-disk">#</a></h2>
<h3 id="get-the-device-info">Get the device info<a hidden class="anchor" aria-hidden="true" href="#get-the-device-info">#</a></h3>
<p>Use <code>dmesg</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>dmesg | tail
</span></span></code></pre></td></tr></table>
</div>
</div><p>Get the device info</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>umass0 on uhub0
</span></span><span style="display:flex;"><span>umass0: &lt;Ugreen Ugreen Storage Device, class 0/0, rev 2.10/1.00, addr 1&gt; on usbus0
</span></span><span style="display:flex;"><span>umass0:  SCSI over Bulk-Only; quirks = 0x0100
</span></span><span style="display:flex;"><span>umass0:4:0: Attached to scbus4
</span></span><span style="display:flex;"><span>da0 at umass-sim0 bus 0 scbus4 target 0 lun 0
</span></span><span style="display:flex;"><span>da0: &lt;CT1000MX 500SSD1 0&gt; Fixed Direct Access SPC-4 SCSI device
</span></span><span style="display:flex;"><span>da0: Serial Number 0000000247EA
</span></span><span style="display:flex;"><span>da0: 40.000MB/s transfers
</span></span><span style="display:flex;"><span>da0: 953869MB (1953525168 512 byte sectors)
</span></span><span style="display:flex;"><span>da0: quirks=0x2&lt;NO_6_BYTE&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Use <code>camcontrol devlist</code></p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>camcontrol devlist
</span></span></code></pre></td></tr></table>
</div>
</div><p>The device info</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&lt;TSSTcorp CDDVDW SN-208FB TM00&gt;    at scbus0 target 0 lun 0 (cd0,pass0)
</span></span><span style="display:flex;"><span>&lt;HGST HTS721010A9E630 JB0OA3J0&gt;    at scbus1 target 0 lun 0 (pass1,ada0)
</span></span><span style="display:flex;"><span>&lt;HFS256G3AMNB-2200A 10108L00&gt;      at scbus2 target 0 lun 0 (pass2,ada1)
</span></span><span style="display:flex;"><span>&lt;AHCI SGPIO Enclosure 2.00 0001&gt;   at scbus3 target 0 lun 0 (pass3,ses0)
</span></span><span style="display:flex;"><span>&lt;CT1000MX 500SSD1 0&gt;               at scbus4 target 0 lun 0 (da0,pass4)
</span></span></code></pre></td></tr></table>
</div>
</div><p>As we can see, the device is da0</p>
<h3 id="show-the-part-of-the-disk">Show the part of the disk<a hidden class="anchor" aria-hidden="true" href="#show-the-part-of-the-disk">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>gpart show da0
</span></span></code></pre></td></tr></table>
</div>
</div><p>We can see the device has 6 partitions.</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>=&gt;        34  1953525101  da0  GPT  (932G)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>          34        2014       - free -  (1.0M)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        2048     1083392    1  ms-recovery  (529M)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     1085440      204800    2  efi  (100M)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     1290240       32768    3  ms-reserved  (16M)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     1323008   207159698    4  ms-basic-data  (99G)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   208482706        1646       - free -  (823K)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   208484352     1230848    5  ms-recovery  (601M)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   209715200        2048       - free -  (1.0M)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   209717248  1334204416    6  ms-basic-data  (636G)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  1543921664   409603471       - free -  (195G)
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="mount-the-part">Mount the part<a hidden class="anchor" aria-hidden="true" href="#mount-the-part">#</a></h3>
<ol>
<li>Mount the partition 4  <code>/dev/da0p4</code> to <code>/mnt/ntfs/part4</code>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>ntfs-3g /dev/da0p4 /mnt/ntfs/part4
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>Mount the partition 6  <code>/dev/da0p6</code> to <code>/mnt/ntfs/part6</code>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>ntfs-3g /dev/da0p6 /mnt/ntfs/part6
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h2 id="troubleshooting">Troubleshooting<a hidden class="anchor" aria-hidden="true" href="#troubleshooting">#</a></h2>
<h3 id="metadata-kept-in-windows-cache">Metadata kept in Windows cache<a hidden class="anchor" aria-hidden="true" href="#metadata-kept-in-windows-cache">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Windows is hibernated, refused to mount.
</span></span><span style="display:flex;"><span>The disk contains an unclean file system (0, 0).
</span></span><span style="display:flex;"><span>Metadata kept in Windows cache, refused to mount.
</span></span><span style="display:flex;"><span>Falling back to read-only mount because the NTFS partition is in an
</span></span><span style="display:flex;"><span>unsafe state. Please resume and shutdown Windows fully (no hibernation
</span></span><span style="display:flex;"><span>or fast restarting.)
</span></span></code></pre></td></tr></table>
</div>
</div><p>Use <code>ntfsfix</code> to fix the part</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>ntfsfix /dev/da0
</span></span></code></pre></td></tr></table>
</div>
</div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://puffinjiang.github.io/tags/ntfs/">NTFS</a></li>
      <li><a href="https://puffinjiang.github.io/tags/freebsd/">FreeBSD</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://puffinjiang.github.io/posts/learning/deployingnfsserviceonfreebsd/">
    <span class="title">Next »</span>
    <br>
    <span>Deploying NFS Service On FreeBSD</span>
  </a>
</nav>

  </footer><script src="https://utteranc.es/client.js"
    repo="puffinjiang/blog-comment"
    issue-term="pathname"
    label="Comment"
    theme="github-light"
    crossorigin="anonymous"
    async>
</script>
</article>
    </main>
    
<footer class="footer">
    <span>Puffin Jiang</span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
